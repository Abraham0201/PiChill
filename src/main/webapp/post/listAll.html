
<!DOCTYPE html>
<html lang="zh-TW">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pichill</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
	crossorigin="anonymous"></script>
<script src="../vendors/jquery/jquery-3.4.1.min.js"></script>
<script src="https://kit.fontawesome.com/2bd4419edb.js"
	crossorigin="anonymous"></script>
<style>
* {
	box-sizing: border-box;
}

body {
	margin: 0;
	padding: 10px;
	background: #F7F7F7;
}

img {
	max-width: 100%;
}

html {
	--header-height: 79.42px;
	--aside-width: 400px;
	--footer-height: 101.96px;
}

/*=====header=====*/
header.header {
	/* border: 1px solid black; */
	background-color: #207DCA;
	position: sticky;
	margin: 0 auto 10px auto;
	top: 0;
	z-index: 5;
}

@media all and (min-width: 576px) and (max-width: 767.98px) {
	header.header {
		width: 540px;
	}

	/* header.header ul.nav{
      display: none;
      }
      label{
      display: block;
      }
    #burger:checked + ul{
      display:block;
      } */
}

@media ( max-width : 575.98px) {
	header.header {
		width: 100%;
	}

	/* header.header ul.nav{
      display: none;
      }
    label{
      display: block;
      }
    #burger:checked + ul{
      display:block;
      } */
}

/*=== header導覽列 ===*/
.nav-link {
	color: white;
	margin: 15px;
}

/*=====aside=====*/
aside.aside {
	/* 	border: 1px solid blue; */
	/* background-color: red; */
	position: absolute;
	top: var(--header-height);
	bottom: var(--footer-height);
	width: 31%;
	top: 100px;
	right: 10px;
	top: 100px;
	/* bottom: 0; */
	height: 100vh;
	overflow-y: auto;
	/* 這個屬性使區塊可以滾動 */
}

.card-body img {
	width: 30px;
	height: 30px;
	border-radius: 50%;
	margin-right: 5px;
}

.aside {
	font-size: 85%;
}

/*=====main=====*/
main.main {
	position: relative;
	border: 1px solid rgb(206, 202, 202);
	background-color: #f7f7f7;
	width: calc(100% -var(--aside-width));
	margin-right: var(--aside-width);
	min-height: calc(100vh - var(--header-height)- var(--footer-height));
}

/*建立貼文*/
#create-post-button {
	background-color: #F7F7F7;
	color: #333;
	border: 1px solid #ccc;
	margin-top: 10px;
	margin-left: 100px;
	text-align: center;
	padding: 5px 10px 5px 5px;
	width: 65%;
}

/* 新增的搜索框样式 */
.search-box {
	margin-top: 10px;
	text-align: center;
	padding: 5px 10px 5px 5px;
	width: 95%;
}

#search-input {
	padding: 5px;
	border: 1px solid #ccc;
	border-radius: 5px;
	width: 400px;
}

#search-button {
	padding: 5px 10px;
	background-color: #333;
	color: #fff;
	border: none;
	border-radius: 5px;
	cursor: pointer;
}

#search-options {
	padding: 5px;
	border: 1px solid #ccc;
	border-radius: 5px;
	cursor: pointer;
}

/*================文章範例(討論版)=============*/
.modal-title img {
	width: 50px;
	height: 50px;
	border-radius: 50%;
	margin-right: 5px;
}

.modal-title {
	display: flex;
	align-items: center;
}

h5.card-title {
	width: 22rem;
	margin-top: 10px;
}

.card.mb-3.article {
	margin-left: 30px;
}

a.post_user {
	text-decoration: none;
	color: #333;
	font-size: 1.3rem;
	font-weight: bold;
}

.post_time {
	font-size: 0.6rem;
	/* 調整時間字體大小 */
	color: #777;
	text-align: center;
}

.post_owner {
	text-decoration: none;
	color: #333;
	font-size: 1.0rem;
	font-weight: bold;
}

.post_timer {
	font-size: 0.6rem;
	/* 調整時間字體大小 */
	color: #777;
	text-align: center;
}

.edit_discuss {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 50px;
}

.edit_group {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 50px;
}

.delete {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 10px;
}

/* .edit, .delete {
      position: relative;
      cursor: pointer;
      border: none;
      background: none;
    } */
.tooltip-text {
	visibility: hidden;
	background-color: #333;
	color: #fff;
	text-align: center;
	border-radius: 5px;
	padding: 5px;
	position: absolute;
	z-index: 1;
	bottom: 125%;
	left: 50%;
	margin-left: -40px;
	opacity: 0;
	transition: opacity 0.3s;
}

.edit_discuss:hover .tooltip-text, .edit_group:hover .tooltip-text,
	.delete:hover .tooltip-text, .report:hover .tooltip-text {
	visibility: visible;
	opacity: 1;
}

.report {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 10px;
}

#piccontainer {
	max-width: 250px;
	max-height: 200px;
	overflow: hidden;
	/* 超過區塊大小的部分隱藏 */
}

.card-body {
	padding-bottom: 5px;
}

#articlepic {
	width: 200px;
	max-height: 200px;
	height: auto;
	position: relative;
	top: 30%;
	left: 20px;
	margin-right: 10px;
}

#card-footer {
	margin-bottom: 5px;
	position: relative;
}

button.fa-regular {
	border: 0;
	background-color: white;
}

.card.mb-3.article .card-text {
	display: -webkit-box;
	-webkit-box-orient: vertical;
	overflow: hidden;
	-webkit-line-clamp: 2;
	/* 設定行數上限為 2 行 */
}

.card.mb-3.article .card-text2 {
	display: none;
}

#article3 {
	margin-top: 10px;
}

nav {
	text-align: center;
	/* 文字置中 */
	margin-top: 20px;
	/* 上邊距 */
	position: relative;
	left: 38%;
}

/*=====footer=====*/
footer.footer {
	/* border: 1px solid black;  */
	background-color: #207DCA;
	/* width: 720px; */
	margin: 10px auto 0 auto;
}

@media ( min-width : 576px) and (max-width: 767.98px) {
	footer.footer {
		width: 540px;
	}
}

@media ( max-width : 575.98px) {
	footer.footer {
		width: 100%;
	}
}

/*=======建立貼文燈箱(討論版)========*/
div.col {
	width: 20px;
}

div.form-check {
	margin-left: 20px;
}

#title {
	/* border: 1px solid black; */
	margin-top: 20px;
	width: 440px;
}

#comment {
	/* border: 1px solid black; */
	margin-top: 20px;
	margin-bottom: 20px;
	width: 440px;
	height: 100px;
}

div.post-pic {
	border: 1px solid black;
	margin-top: 20px;
	height: 150px;
}

button.post-button {
	border: 1px solid black;
	margin-top: 20px;
	width: 700px;
}

button.save-button_discuss {
	border: 1px solid black;
	margin-top: 20px;
	width: 700px;
}

button.save-button_group {
	border: 1px solid black;
	margin-top: 20px;
	width: 700px;
}

#preview {
	border: 1px solid lightgray;
	margin-top: 10px;
	display: inline-block;
	width: 250px;
	min-height: 300px;
	position: relative;
}

#preview span.text {
	position: absolute;
	display: inline-block;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: -1;
	color: lightgray;
}

#preview img.preview_img {
	width: 100%;
}

#preview_edit {
	border: 1px solid lightgray;
	margin-top: 10px;
	display: inline-block;
	width: 250px;
	min-height: 300px;
	position: relative;
}

#preview_edit span.text {
	position: absolute;
	display: inline-block;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: -1;
	color: lightgray;
}

#preview_edit img.preview_img {
	width: 100%;
}

#preview2 {
	border: 1px solid lightgray;
	margin-top: 10px;
	display: inline-block;
	width: 250px;
	min-height: 300px;
	position: relative;
}

#preview2 span.text {
	position: absolute;
	display: inline-block;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: -1;
	color: lightgray;
}

#preview2 img.preview_img {
	width: 100%;
}

#preview2_edit {
	border: 1px solid lightgray;
	margin-top: 10px;
	display: inline-block;
	width: 250px;
	min-height: 300px;
	position: relative;
}

#preview2_edit span.text {
	position: absolute;
	display: inline-block;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	z-index: -1;
	color: lightgray;
}

#preview2_edit img.preview_img {
	width: 100%;
}
/*==============(揪團版)==================*/
div.form-check {
	margin-left: 20px;
}

input.title {
	border: 1px solid black;
	margin-top: 20px;
	width: 440px;
}

.content {
	margin-top: 20px;
}

#peoplecol {
	padding: 3px 0 0 0;
}

#peoplecol2 {
	padding-left: 0;
}

#datecol {
	padding: 3px 0 0 0;
}

#datecol2 {
	padding-left: 0;
}

#timecol {
	padding: 3px 0 0 0;
}

#timecol2 {
	padding-left: 0;
}

#locatecol {
	padding: 3px 0 0 0;
}

#locatecol2 {
	padding-left: 0;
}

#ballcol {
	padding: 3px 0 0 0;
}

#ballcol2 {
	padding-left: 0;
}

#costcol {
	padding: 3px 0 0 0;
	margin-bottom: 20px;
}

#costcol2 {
	padding-left: 0;
}

input.cost {
	width: 100px;
}

/*=================查看文章=================*/
.modal-header img {
	width: 50px;
	height: 50px;
	border-radius: 50%;
	margin-right: 5px;
}

.edit-m {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 100px;
}

.delete-m {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 60px;
}

/* .edit, .delete {
      position: relative;
      cursor: pointer;
      border: none;
      background: none;
    } */
.tooltip-text2 {
	visibility: hidden;
	background-color: #333;
	color: #fff;
	text-align: center;
	border-radius: 5px;
	padding: 5px;
	position: absolute;
	z-index: 1;
	bottom: -30%;
	left: 50%;
	margin-left: -60px;
	opacity: 0;
	transition: opacity 0.3s;
}

.edit-m:hover .tooltip-text2, .delete-m:hover .tooltip-text2, .report-m:hover .tooltip-text2
	{
	visibility: visible;
	opacity: 1;
}

.report-m {
	border: 0 white;
	background-color: white;
	padding: 0;
	position: absolute;
	cursor: pointer;
	top: 10px;
	right: 60px;
}

* {
	box-sizing: border-box;
}

/* html{
font-size: 62.5%;
} */
body {
	margin: 0;
	background: rgb(10, 0, 36);
	background: radial-gradient(circle, rgba(10, 0, 36, 0.1110819327731093)
		0%, rgba(9, 9, 121, 0.1110819327731093) 5%,
		rgba(0, 212, 255, 0.04665616246498594) 100%);
}

article.task_container {
	width: 750px;
	margin: 10px auto 0;
	border-radius: 5px;
	padding: 10px;
	box-shadow: 1px 1px 5px gray;
}

h1.title1 {
	font-size: 2.4rem;
	margin: 0 0 10px 0;
}

/* ===== 任務新增 ===== */
div.task_add_block {
	font-size: 0;
	transition: transform .5s, box-shadow .5s;
}

div.task_add_block.-on {
	box-shadow: 0 0 5px gray;
	transform: scale(1.01);
	transform-origin: center center;
}

div.task_add_block input.task_name {
	width: calc(100% - 50px);
	border: 1px solid lightgray;
	border-radius: 3px 0 0 3px;
	height: 40px;
	font-size: 1rem;
	padding: 5px 10px;
	outline: none;
	display: inline-block;
	vertical-align: top;
}

input.task_name::placeholder {
	color: lightgray;
}

div.task_add_block button.task_add {
	display: inline-block;
	width: 50px;
	height: 40px;
	vertical-align: top;
	border: 1px solid lightgray;
	border-left: 0;
	background-color: white;
	box-shadow: none;
	font-size: 1rem;
	cursor: pointer;
	outline: none;
	border-radius: 0 3px 3px 0;
}

div.task_add_block button.task_add:active {
	box-shadow: 1px 1px 3px lightgray inset, -1px -1px 3px lightgray inset;
	background-color: #fcfcfc;
	font-size: 1rem;
}

/* ===== 任務列表 ===== */
div.task_list_parent {
	margin-top: 10px;
}

div.task_list_parent ul.task_list {
	margin: 0;
	padding: 0;
	list-style: none;
}

div.task_list_parent ul.task_list>li {
	margin-bottom: 20px;
	border-bottom: 1px solid gray;
	padding-bottom: 10px;
}

div.task_list_parent ul.task_list>li:first-child {
	border-top: 1px solid black;
	padding-top: 10px;
}

div.task_list_parent ul.task_list>li:first-child button.btn_up {
	background-color: lightgray !important;
	cursor: not-allowed !important;
	color: gray;
}

div.task_list_parent ul.task_list>li:last-child {
	margin-bottom: 0;
	border-bottom: 0;
}

div.task_list_parent ul.task_list>li:last-child button.btn_down {
	background-color: lightgray !important;
	cursor: not-allowed !important;
	color: gray;
}

div.task_list_parent ul.task_list>li>div.item_flex {
	display: flex;
	/* border: 1px solid black; */
}

/* div.task_list_parent ul.task_list>li>div.item_flex>div {
/* border: 1px solid blue; */
/* } */
div.task_list_parent ul.task_list>li>div.item_flex>div.left_block {
	width: 100px;
	display: flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.left_block>div.comment_img img
	{
	width: 50px;
	height: 50px;
	border-radius: 50%;
	margin-right: 5px;
	font-size: 2rem;
}

a.comment_user {
	text-decoration: none;
	color: #333;
	font-size: 1.3rem;
	font-weight: bold;
}

.comment_time {
	font-size: 0.6rem;
	/* 調整時間字體大小 */
	color: #777;
	/* 調整時間字體顏色 */
}

div.task_list_parent ul.task_list>li>div.item_flex>div.left_block div.btn_flex
	{
	display: flex;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.left_block div.btn_flex>button
	{
	flex-grow: 1;
	outline: none;
	height: 40px;
	font-size: 1.6rem;
	padding: 0;
	margin: 0;
	background: none;
	background-color: white;
	border: 0;
	cursor: pointer;
	border: 1px solid #eee;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.middle_block {
	font-size: 0.8rem;
	flex-grow: 1;
	padding-left: 10px;
	padding-right: 10px;
	text-align: left;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.middle_block p.para
	{
	font-size: 1.3rem;
	text-align: left;
	padding-top: 20px;
	margin: 0;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.right_block {
	width: 100px;
	flex-shrink: 0;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.right_block div.btn_flex
	{
	display: flex;
	flex-direction: column;
}

div.task_list_parent ul.task_list>li>div.item_flex>div.right_block div.btn_flex>button
	{
	flex-grow: 1;
	outline: none;
	height: 40px;
	font-size: 1rem;
	padding: 0;
	margin: 0;
	background: none;
	background-color: white;
	border: 0;
	cursor: pointer;
	border: 1px solid #eee;
}

div.middle_block input.task_name_update {
	width: 100%;
	border: 1px solid lightgray;
	border-radius: 3px 0 0 3px;
	height: 40px;
	font-size: 1.3rem;
	padding: 5px 10px;
	outline: none;
}

div.middle_block input.task_name_update::placeholder {
	color: lightgray;
}

.-none {
	display: none;
}

/* ===== 清空按鈕 ===== */
button.btn_empty {
	float: right;
	background: none;
	background-color: white;
	padding: 0;
	margin: 0;
	border: 1px solid lightgray;
	border-radius: 3px;
	height: 30px;
	width: 50px;
	outline: none;
	font-size: 1.6rem;
	cursor: pointer;
}

/* ===== 重要性的星號 ===== */
div.star_block {
	display: inline-block;
}

div.star_block>span.star {
	cursor: pointer;
	display: inline-block;
	margin-right: 3px;
}

div.star_block>span.star.-on {
	color: yellow;
}

#likecol {
	padding: 0;
	margin-top: 10px;
}

#commentcol {
	padding: 0;
	margin-top: 10px;
}

#pluscol {
	padding: 0;
	margin-top: 10px;
}

.fa-thumbs-up {
	margin-bottom: 5px;
	/* 調整按讚按鈕和下一個元素的距離 */
}
</style>
</head>

<body>
	<header class="header">
		<div class="container">
			<header class="d-flex flex-wrap justify-content-center py-1">
				<a href="/"
					class="d-flex align-items-center mb-1 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
					<img src="../image/headerlogo.svg" alt="SVG">
				</a>


				<ul class="nav nav-pills">
					<li class="nav-item"><a href="#" class="nav-link">公告</a></li>
					<li class="nav-item"><a href="#" class="nav-link">場館資訊</a></li>
					<li class="nav-item"><a href="#" class="nav-link">我要預約</a></li>
					<li class="nav-item"><a href="#" class="nav-link">論壇</a></li>
					<li class="nav-item"><a href="#" class="nav-link"><img
							src="../image/face.svg" alt="SVG"> 會員中心</a></li>
				</ul>

				<!-- <label for="burger">☰</label>
              <input type="hidden" id="burger"> -->
			</header>
		</div>
	</header>

	<!-- <label for="burger">☰</label>
        <input type="hidden" id="burger"> -->
	<aside class=aside>

		<div class="card" style="width: 22rem;">
			<div class="card-body">
				<h5 class="card-title">
					<img src="../image/Group 37.png" alt="SVG">版主
				</h5>
				<p class="card-text">
					歡迎各位π郎來到Pichill論壇，請務必遵守以下版規: <br> • 發表文章時，需使用適當分類，以利版友查詢。<br>
					1.[討論]所有相關運動的閒談、問題及討論皆可使用。於本版發佈之問券，內容須與運動相關，並經版主同意後發布。<br>
					2.[揪團]<br> • 若用戶遭檢舉且版主判定內容屬實，將停止其論壇發文及留言功能7日並刪除文章。
				</p>
			</div>
		</div>
		<!------推撥範例------->
		<div id="promote-list">
			<div class="card mb-3" id=article3 style="width: 22rem;">
				<div class="row g-0">
					<div class="col-md-8">
						<div class="card-body">
							<h1 class="modal-title fs-5" id="exampleModalLabel">
								<img src="../image/Capybara.jpg" alt="大頭貼">
								<div>
									<a class="post_owner">水豚君</a>
									<div class="post_timer">30分鐘前</div>
								</div>
							</h1>
							<h5 class="card-title">歡迎大家來運動!</h5>
							<p class="card-text">
							<div class="container text" s>
								<div class="row" style="width: 22rem">
									<div class="col-2 col-sm-3">日期:</div>
									<div class="col-2 col-sm-4">2023/11/20</div>
									<div class="w-100 d-none d-md-block"></div>

									<div class="col-2 col-sm-3">時間:</div>
									<div class="col-2 col-sm-4">08:00~09:00</div>
									<div class="w-100 d-none d-md-block"></div>

									<div class="col-2 col-sm-3">地點:</div>
									<div class="col-2 col-sm-4">陽明籃球館</div>
									<div class="w-100 d-none d-md-block"></div>

									<div class="col-2 col-sm-3">球類:</div>
									<div class="col-2 col-sm-4">籃球</div>
								</div>
							</div>
							</p>
						</div>
					</div>
				</div>
			</div>
	</aside>

	<main class=main>
		<!--建立貼文-->
		<button type="button" class="btn btn-primary" data-bs-toggle="modal"
			data-bs-target="#exampleModal" id="create-post-button">
			在想些什麼...</button>
		<!--搜尋文章-->
		<div class="search-box">
			<input type="text" id="search-input" placeholder="搜尋文章...">
			<button id="search-button">搜尋</button>
			<select id="search-options">
				<option value="newest">最新</option>
				<option value="hot">熱門</option>
				<option value="my-posts">我的文章</option>
				<option value="discussions">討論版</option>
				<option value="events">揪團版</option>
			</select>
		</div>
		<!-- 文章列表 -->
		<div id="post-list">
			<!-- 文章由JavaScript添加到此 -->
		</div>
		<!--========編輯發文燈箱========-->
		<form id="updatepost">
			<div class="modal fade" id="exampleModal_edit" tabindex="-1"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-dialog-scrollable">
					<div class="modal-content">
						<div class="modal-header">
							<h1 class="modal-title fs-5" id="exampleModalLabel">建立貼文</h1>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<div class="container text-center">
								<!--========討論版發文的內容==========-->
								<div id="discussionContent_edit">
									<div class="row align-items-center">
										<div class="col-3">
											<button class="btn btn-secondary" type="button"
												id="dropdownMenuButton1" disabled>討論版</button>
										</div>
										<div class="col-4">
											<div class="form-check">
												<input class="form-check-input" type="checkbox" value=""
													id="flexCheckDefault"> <label
													class="form-check-label" for="flexCheckDefault">
													匿名發文 </label>
											</div>
										</div>
									</div>
									<div>
										<div class="form-floating" id="title">
											<input type="hidden" class="discussType" name="discussType"
												value="0">
											<textarea class="form-control"
												placeholder="Leave a comment here"
												id="floatingTextarea_edit" name="postTitle"></textarea>
											<label for="floatingTextarea">請輸入標題</label>
										</div>
										<div class="form-floating" id="comment">
											<textarea class="form-control"
												placeholder="Leave a comment here"
												id="floatingTextarea2_edit" name="postComment"
												style="height: 100px"></textarea>
											<label for="floatingTextarea2">請輸入內文</label>
										</div>
									</div>
									<div>
										<label>上傳圖片：</label> <input type="file" id="p_file_edit"
											multiple>
										<div id="preview_edit">
											<span class="text">預覽圖</span>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="save-button_discuss"
											id="save-discuss" data-post-id="${postID}">儲存</button>
									</div>
								</div>
		</form>
		<!--========揪團版發文的內容==========-->
		<div id="gatheringContent_edit" style="display: none;">
			<div class="row align-items-center">
				<div class="col-3">
					<button class="btn btn-secondary" type="button"
						id="dropdownMenuButton1" disabled>揪團版</button>
				</div>
			</div>
			<div>
				<div class="form-floating" id="title">
					<input type="hidden" class="groupType" name="groupType" value="1">
					<textarea class="form-control" placeholder="Leave a comment here"
						id="floatingTextarea3_edit"></textarea>
					<label for="floatingTextarea3">請輸入標題</label>
				</div>
				<div class="content">
					<div class="container text-center">
						<div class="row align-items-start">
							<div class="col-2" id="datecol">日期:</div>
							<div class="col-3" id="datecol2">
								<div class="btn-group">
									<button class="btn btn-secondary btn-sm dropdown-toggle"
										type="button" data-bs-toggle="dropdown" aria-expanded="false">2023/11/20</button>
									<ul class="dropdown-menu">...
									</ul>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="container text-center">
						<div class="row align-items-start">

							<div class="col-2" id="timecol">時間:</div>
							<div class="col-3" id="timecol2">
								<div class="btn-group">
									<button class="btn btn-secondary btn-sm dropdown-toggle"
										type="button" data-bs-toggle="dropdown" aria-expanded="false">08:00~09:00</button>
									<ul class="dropdown-menu">...
									</ul>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="container text-center">
						<div class="row align-items-start">

							<div class="col-2" id="locatecol">地點:</div>
							<div class="col-3" id="locatecol2">
								<div class="btn-group">
									<button class="btn btn-secondary btn-sm dropdown-toggle"
										type="button" data-bs-toggle="dropdown" aria-expanded="false">陽明籃球館</button>
									<ul class="dropdown-menu">...
									</ul>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="container text-center">
						<div class="row align-items-start">
							<div class="col-2" id="ballcol">球類:</div>
							<div class="col-2" id="ballcol2">
								<div class="btn-group">
									<button class="btn btn-secondary btn-sm dropdown-toggle"
										type="button" data-bs-toggle="dropdown" aria-expanded="false">籃球</button>
									<ul class="dropdown-menu">...
									</ul>
								</div>
							</div>
						</div>
					</div>
					<br>
					<div class="container text-center">
						<div class="row align-items-start">
							<div class="col-2" id="costcol">費用:</div>
							<div class="col-2" id="costcol2">
								<input type="text" class="cost" placeholder="請輸入金額">
							</div>
						</div>
					</div>
				</div>
				<div class="form-floating" id="comment">
					<textarea class="form-control" placeholder="Leave a comment here"
						id="floatingTextarea4_edit" style="height: 100px"></textarea>
					<label for="floatingTextarea4">請輸入內文</label>
				</div>
			</div>

			<div>
				<label>上傳圖片：</label> <input type="file" id="p_file2_edit">
				<div id="preview2_edit">
					<span class="text">預覽圖</span>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="save-button_group" id="save-group"
					data-post-id="${postID}">儲存</button>
			</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		<!--==== 檢舉Modal ======-->
		<div class="modal fade" id="exampleModal2" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-sm modal-dialog-centered ">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">檢舉</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault1"> <label
								class="form-check-label" for="flexRadioDefault1"> 違反版規 </label>
						</div>
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault2" checked>
							<label class="form-check-label" for="flexRadioDefault2">
								內容不實 </label>
						</div>
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault1"> <label
								class="form-check-label" for="flexRadioDefault1"> 惡意洗版 </label>
						</div>
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault2" checked>
							<label class="form-check-label" for="flexRadioDefault2">
								仇恨言論 </label>
						</div>
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault2" checked>
							<label class="form-check-label" for="flexRadioDefault2">
								商業宣傳內容 </label>
						</div>
						<div class="form-check">
							<input class="form-check-input" type="radio"
								name="flexRadioDefault" id="flexRadioDefault2" checked>
							<label class="form-check-label" for="flexRadioDefault2">
								其他 </label>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary">送出</button>
					</div>
				</div>
			</div>
		</div>
		<nav aria-label="Page navigation example">
			<ul class="pagination" id="page">
				<!-- Previous Page Button -->
				<li class="page-item"><a class="page-link" href="#"
					data-page="1"> <span aria-hidden="true">&laquo;</span></a></li>
				<li class="page-item"><a class="page-link" href="#"
					data-page="1">1</a></li>
				<li class="page-item"><a class="page-link" href="#"
					data-page="2">2</a></li>
				<li class="page-item"><a class="page-link" href="#"
					data-page="3">3</a></li>
				<!-- Next Page Button -->
				<li class="page-item"><a class="page-link" href="#"
					data-page="4" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>
			</ul>
		</nav>
	</main>

	<footer class="footer">

		<div class="container">
			<header class="d-flex flex-wrap justify-content-center py-3">
				<a href="/"
					class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
					<img src="../image/footerlogo.svg" alt="SVG">
				</a>

				<ul class="nav nav-pills">
					<li class="nav-item"><a href="#" class="nav-link">使用者條款</a></li>
					<li class="nav-item"><a href="#" class="nav-link"></a></li>
					<li class="nav-item"><a href="#" class="nav-link">隱私權政策</a></li>
					<li class="nav-item"><a href="#" class="nav-link"></a></li>
					<li class="nav-item"><a href="#" class="nav-link">免責條款</a></li>
					<li class="nav-item"><a href="#" class="nav-link"></a></li>
					<li class="nav-item"><a href="#" class="nav-link"></a></li>

				</ul>
			</header>
		</div>
	</footer>

	<!--========發文燈箱========-->
	<form id="addpost">
		<div class="modal fade" id="exampleModal" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h1 class="modal-title fs-5" id="exampleModalLabel">建立貼文</h1>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="container text-center">
							<!--========討論版發文的內容==========-->
							<div id="discussionContent">
								<div class="row align-items-center">
									<div class="col-3">
										<div class="dropdown">
											<button class="btn btn-secondary dropdown-toggle"
												type="button" id="dropdownMenuButton1"
												data-bs-toggle="dropdown" aria-expanded="false">討論版
											</button>
											<ul class="dropdown-menu"
												aria-labelledby="dropdownMenuButton1">
												<li><a class="dropdown-item" id="discuss" href="#">討論版</a></li>
												<li><a class="dropdown-item" id="group" href="#">揪團版</a></li>
										</div>
									</div>
									<div class="col-4">
										<div class="form-check">
											<input class="form-check-input" type="checkbox" value=""
												id="flexCheckDefault"> <label
												class="form-check-label" for="flexCheckDefault">
												匿名發文 </label>
										</div>
									</div>
								</div>
								<div>
									<div class="form-floating" id="title">
										<input type="hidden" class="discussType" name="discussType"
											value="0">
										<textarea class="form-control"
											placeholder="Leave a comment here" id="floatingTextarea"
											name="postTitle"></textarea>
										<label for="floatingTextarea">請輸入標題</label>
									</div>
									<div class="form-floating" id="comment">
										<textarea class="form-control"
											placeholder="Leave a comment here" id="floatingTextarea2"
											name="postComment" style="height: 100px"></textarea>
										<label for="floatingTextarea2">請輸入內文</label>
									</div>
								</div>
								<div>
									<label>上傳圖片：</label> <input type="file" id="p_file" multiple>
									<div id="preview">
										<span class="text">預覽圖</span>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="post-button" id="pb-discuss">發布</button>
								</div>
							</div>
	</form>
	<!--========揪團版發文的內容==========-->
	<div id="gatheringContent" style="display: none;">
		<div class="row align-items-center">
			<div class="col-3">
				<div class="dropdown">
					<button class="btn btn-secondary dropdown-toggle" type="button"
						id="dropdownMenuButton1" data-bs-toggle="dropdown"
						aria-expanded="false">揪團版</button>
					<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
						<li><a class="dropdown-item" id="discuss1" href="#">討論版</a></li>
						<li><a class="dropdown-item" id="group1" href="#">揪團版</a></li>
				</div>
			</div>
		</div>
		<div>
			<div class="form-floating" id="title">
				<input type="hidden" class="groupType" name="groupType" value="1">
				<textarea class="form-control" placeholder="Leave a comment here"
					id="floatingTextarea3"></textarea>
				<label for="floatingTextarea3">請輸入標題</label>
			</div>
			<div class="content">
				<div class="container text-center">
					<div class="row align-items-start">
						<div class="col-2" id="datecol">日期:</div>
						<div class="col-3" id="datecol2">
							<div class="btn-group">
								<button class="btn btn-secondary btn-sm dropdown-toggle"
									type="button" data-bs-toggle="dropdown" aria-expanded="false">2023/11/20</button>
								<ul class="dropdown-menu">...
								</ul>
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="container text-center">
					<div class="row align-items-start">

						<div class="col-2" id="timecol">時間:</div>
						<div class="col-3" id="timecol2">
							<div class="btn-group">
								<button class="btn btn-secondary btn-sm dropdown-toggle"
									type="button" data-bs-toggle="dropdown" aria-expanded="false">08:00~09:00</button>
								<ul class="dropdown-menu">...
								</ul>
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="container text-center">
					<div class="row align-items-start">

						<div class="col-2" id="locatecol">地點:</div>
						<div class="col-3" id="locatecol2">
							<div class="btn-group">
								<button class="btn btn-secondary btn-sm dropdown-toggle"
									type="button" data-bs-toggle="dropdown" aria-expanded="false">陽明籃球館</button>
								<ul class="dropdown-menu">...
								</ul>
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="container text-center">
					<div class="row align-items-start">
						<div class="col-2" id="ballcol">球類:</div>
						<div class="col-2" id="ballcol2">
							<div class="btn-group">
								<button class="btn btn-secondary btn-sm dropdown-toggle"
									type="button" data-bs-toggle="dropdown" aria-expanded="false">籃球</button>
								<ul class="dropdown-menu">...
								</ul>
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="container text-center">
					<div class="row align-items-start">
						<div class="col-2" id="costcol">費用:</div>
						<div class="col-2" id="costcol2">
							<input type="text" class="cost" placeholder="請輸入金額">
						</div>
					</div>
				</div>
			</div>
			<div class="form-floating" id="comment">
				<textarea class="form-control" placeholder="Leave a comment here"
					id="floatingTextarea4" style="height: 100px"></textarea>
				<label for="floatingTextarea4">請輸入內文</label>
			</div>
		</div>

		<div>
			<label>上傳圖片：</label> <input type="file" id="p_file2">
			<div id="preview2">
				<span class="text">預覽圖</span>
			</div>
		</div>
		<div class="modal-footer">
			<button type="button" class="post-button" id="pb-group">發布</button>
		</div>
	</div>
	</div>
	</div>
	</div>
	</div>
	</div>
	</div>

	<!--======== Modal查看文章(討論版)========= -->
	<div class="modal fade" id="exampleModal5" tabindex="-1"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-scrollable modal-lg">
			<div class="modal-content">
				<div class="modal-header">
				 <h1 class="modal-title fs-5">
                            <img src="../image/cat.jpg" alt="大頭貼">
                            <div>
                                <a class="post_user">貓貓</a>
                                <div class="post_time">${postTime}</div>
                            </div>
                        </h1>
					<button type="button" class="edit-m">
						<i class="fa-regular fa-pen-to-square"></i> <span
							class="tooltip-text2">編輯</span>
					</button>
					<button type="button" class="delete-m" id="deleteButton">
						<i class="fa-regular fa-trash-can"></i> <span
							class="tooltip-text2">刪除</span>
					</button>
					<!-- <button type="button" class="report-m" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <span class="tooltip-text">檢舉</span>
                        </button> -->
					<button type="button" class="btn-close" data-bs-dismiss="modal"
						aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title article0" ></h5>
							<p class="card-text article1" ></p>
						</div>
						<img src="../image/CATBALL.jpg" class="card-img-bottom" alt="...">
					</div>
					<div class="container text-center">
						<div class="row align-items-start">
							<div class="col-2" id="likecol">
								<i class="fa-regular fa-thumbs-up"></i> 123
							</div>
							<div class="col-2" id="commentcol">
								<i class="fa-regular fa-comment"></i> 99
							</div>
							<article class="task_container">
								<div class="task_add_block">
									<input type="text" class="task_name" placeholder="留言…">
									<button type="button" class="task_add">送出</button>
								</div>

								<div class="task_list_parent">
									<ul class="task_list">
									</ul>
								</div>
							</article>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<script>
        //===============下拉選單換字樣=============
        document.addEventListener("DOMContentLoaded", function () {
            var dropdownButton = document.getElementById("dropdownMenuButton1");
            var dropdownItems = document.querySelectorAll(".dropdown-item");

            dropdownItems.forEach(function (item) {
                item.addEventListener("click", function () {
                    var selectedText = item.innerText;
                    dropdownButton.innerText = selectedText;
                });
            });
        });

        //==============切換發文版型=================
        document.addEventListener("DOMContentLoaded", function () {
            var modal = new bootstrap.Modal(document.getElementById("exampleModal"));
            var discussionContent = document.getElementById("discussionContent");
            var gatheringContent = document.getElementById("gatheringContent");

            // 點擊選單切換內容
            document.getElementById("discuss1").addEventListener("click", function () {
                console.log("討論版被點擊");
                // 關閉揪團版，顯示討論版
                gatheringContent.style.display = "none";
                discussionContent.style.display = "block";
            });

            document.getElementById("group").addEventListener("click", function () {
                console.log("揪團版被點擊");
                // 關閉討論版，顯示揪團版
                discussionContent.style.display = "none";
                gatheringContent.style.display = "block";
            });

            // 發布按鈕點擊時觸發
            document.querySelector(".post-button").addEventListener("click", function () {
                // 在這裡處理發布的邏輯
                modal.hide();
            });
        });

        //============上傳圖片跟預覽================
        window.addEventListener("load", function (e) {
            var preview_el = document.getElementById("preview");
            var p_file_el = document.getElementById("p_file");
            var preview_img = function (file) {

                var reader = new FileReader(); // 用來讀取檔案
                reader.readAsDataURL(file); // 讀取檔案
                reader.addEventListener("load", function () {
                    //console.log(reader.result);
                    /*
                    let img_node = document.createElement("img"); // <img>
                    img_node.setAttribute("src", reader.result); // <img src="base64">
                    img_node.setAttribute("class", "preview_img"); // <img src="base64" class="preview_img">
                    preview_el.innerHTML = '';
                    preview_el.append(img_node);
                    */

                    let img_str = '<img src="' + reader.result + '" class="preview_img">';
                    preview_el.innerHTML = img_str;
                });
            };


            p_file_el.addEventListener("change", function (e) {
                if (this.files.length > 0) {
                    preview_img(this.files[0]);
                } else {
                    preview_el.innerHTML = '<span class="text">預覽圖</span>';
                }
            });
        });

        window.addEventListener("load", function (e) {
            var preview_el = document.getElementById("preview2");
            var p_file_el = document.getElementById("p_file2");
            var preview_img = function (file) {

                var reader = new FileReader(); // 用來讀取檔案
                reader.readAsDataURL(file); // 讀取檔案
                reader.addEventListener("load", function () {
                    console.log(reader.result);
                    /*
                    let img_node = document.createElement("img"); // <img>
                    img_node.setAttribute("src", reader.result); // <img src="base64">
                    img_node.setAttribute("class", "preview_img"); // <img src="base64" class="preview_img">
                    preview_el.innerHTML = '';
                    preview_el.append(img_node);
                    */

                    let img_str = '<img src="' + reader.result + '" class="preview_img">';
                    preview_el.innerHTML = img_str;
                });
            };


            p_file_el.addEventListener("change", function (e) {
                if (this.files.length > 0) {
                    preview_img(this.files[0]);
                } else {
                    preview_el.innerHTML = '<span class="text">預覽圖</span>';
                }
            });
        });

        window.addEventListener("load", function (e) {
            var preview_el = document.getElementById("preview_edit");
            var p_file_el = document.getElementById("p_file_edit");
            var preview_img = function (file) {

                var reader = new FileReader(); // 用來讀取檔案
                reader.readAsDataURL(file); // 讀取檔案
                reader.addEventListener("load", function () {
                    //console.log(reader.result);
                    /*
                    let img_node = document.createElement("img"); // <img>
                    img_node.setAttribute("src", reader.result); // <img src="base64">
                    img_node.setAttribute("class", "preview_img"); // <img src="base64" class="preview_img">
                    preview_el.innerHTML = '';
                    preview_el.append(img_node);
                    */

                    let img_str = '<img src="' + reader.result + '" class="preview_img">';
                    preview_el.innerHTML = img_str;
                });
            };


            p_file_el.addEventListener("change", function (e) {
                if (this.files.length > 0) {
                    preview_img(this.files[0]);
                } else {
                    preview_el.innerHTML = '<span class="text">預覽圖</span>';
                }
            });
        });
        
        window.addEventListener("load", function (e) {
            var preview_el = document.getElementById("preview2_edit");
            var p_file_el = document.getElementById("p_file_edit");
            var preview_img = function (file) {

                var reader = new FileReader(); // 用來讀取檔案
                reader.readAsDataURL(file); // 讀取檔案
                reader.addEventListener("load", function () {
                    //console.log(reader.result);
                    /*
                    let img_node = document.createElement("img"); // <img>
                    img_node.setAttribute("src", reader.result); // <img src="base64">
                    img_node.setAttribute("class", "preview_img"); // <img src="base64" class="preview_img">
                    preview_el.innerHTML = '';
                    preview_el.append(img_node);
                    */

                    let img_str = '<img src="' + reader.result + '" class="preview_img">';
                    preview_el.innerHTML = img_str;
                });
            };


            p_file_el.addEventListener("change", function (e) {
                if (this.files.length > 0) {
                    preview_img(this.files[0]);
                } else {
                    preview_el.innerHTML = '<span class="text">預覽圖</span>';
                }
            });
        });
        //====================留言=========================//
        $(function () {

            // ==== 待辦事項文字框的 focus 事件及 blur 事件觸發 ===== //
            $("input.task_name").on("focus", function () {
                $(this).closest("div.task_add_block").addClass("-on");
                //$("div.task_add_block").addClass("-on");
            });
            $("input.task_name").on("blur", function () {
                $(this).closest("div.task_add_block").removeClass("-on");
                //$("div.task_add_block").removeClass("-on");
            });

            // ==== text 欄位新增待辦事項 ===== //
            $("input.task_name").on("keyup", function (e) {
                //console.log(e.which);
                if (e.which == 13) { // 按下 Enter 鍵
                    $("button.task_add").click();
                }
            });

            // 按下新增按鈕
            $("button.task_add").on("click", function () {

                let task_text = ($("input.task_name").val()).trim();
                if (task_text != "") {

                    let list_html = "";

                    list_html += '<li>';
                    list_html += '<div class="item_flex">';
                    list_html += '<div class="left_block">';
                    list_html += '<div class="comment_img"> <img src="../image/cat.jpg" alt="大頭貼"></div>';
                    list_html += '<div>';
                    list_html += '<a class="comment_user">貓貓</a>';
                    list_html += '<div class="comment_time">30分鐘前</div>'
                    list_html += '</div>';
                    list_html += '</div>';
                    list_html += '<div class="middle_block">';

                    list_html += '<p class="para">' + task_text + '</p>';
                    list_html += '<input type="text" class="task_name_update -none" placeholder="更新留言…" value="' + task_text + '">';
                    list_html += '</div>';
                    list_html += '<div class="right_block">';
                    list_html += '<div class="btn_flex">';
                    list_html += '<button type="button" class="btn_update">編輯</button>';
                    list_html += '<button type="button" class="btn_delete">刪除</button>';
                    list_html += '</div>';
                    list_html += '</div>';
                    list_html += '</div>';
                    list_html += '</li>';



                    $("ul.task_list").append(list_html);
                    $("input.task_name").val("");
                }
            });
        });

        // ==== 移除待辦事項 ===== /

        $("ul.task_list").on("click", "button.btn_delete", function () {

            let r = confirm("確認移除？");
            if (r) {

                $(this).closest("li").animate({
                    "opacity": 0
                }, 1000, "swing", function () {
                    $(this).remove();
                });

            }

        });

        $("button.btn_empty").on("click", function () {
            let r = confirm("確認清空？");
            if (r) {
                $("ul.task_list").children("li").animate({
                    "opacity": 0
                }, 1000, "swing", function () {
                    $(this).remove();
                });
            }
        });

        // ==== 更新待辦事項 ===== //
        $("ul.task_list").on("click", "button.btn_update", function () {

            //console.log( $(this).attr("data-edit") );

            if ($(this).attr("data-edit") == undefined) { // 進入編輯狀態

                $(this).attr("data-edit", true);
                $(this).closest("li").find("p.para").toggleClass("-none");
                $(this).closest("li").find("input.task_name_update").toggleClass("-none");

            } else {
                let update_task_name = ($(this).closest("li").find("input.task_name_update").val()).trim();
                if (update_task_name == "") {
                    alert("請輸入待辦事項");
                } else {
                    $(this).closest("li").find("p.para").html(update_task_name).toggleClass("-none");
                    $(this).closest("li").find("input.task_name_update").val(update_task_name).toggleClass("-none");
                    $(this).removeAttr("data-edit");
                }
            }


        });
        //=======變更搜尋框的文字======
        updateSearchPlaceholder();
     $("#search-options").change(function () {
         updateSearchPlaceholder();
     });
     // 更新搜索框的 placeholder
     function updateSearchPlaceholder() {
         var selectedOption = $("#search-options").val();
         var placeholderText = getPlaceholderText(selectedOption);
         $("#search-input").attr("placeholder", placeholderText);
     }
     function getPlaceholderText(selectedOption) {
         switch (selectedOption) {
             case "discussions":
                 return "搜尋討論版文章...";
             case "events":
                 return "搜尋揪團版文章...";
             default:
                 return "搜尋文章...";
         }
     }
   //==============所有文章=============//
   $(document).ready(function () {
	    $.ajax({
	        type: "GET",
	        url: "post.do",
	        dataType: "json",
	        contentType: "application/json; charset=utf-8",
	        success: function (data) {
	            data.forEach(function (post) {
	                if (post.postType === 0) {
	                    publishPost(post.postID,post.postTitle, post.postContent, post.postType, post.postTime,post.postPic, post.likeCnt);
	                } else if (post.postType === 1) {
	                    publishGroupPost(post.postID,post.postTitle, post.postContent,post.postType, post.postTime, post.postPic,post.likeCnt);
	                }else if(post.postType ===2){
	                	publishPromotePost(post.postID,post.postTitle, post.postType, post.postTime);
	                }
	            });
	        },
	        error: function (xhr, status, error) {
	            console.error("Error fetching posts:", status, error);
	        }
	    });

	    function publishPost(postID,postTitle, postContent,postType,postTime,postPic,likeCnt){

            var selectedImage = $('#p_file').prop('files')[0];             
            var imageElement = selectedImage ? `<img src="${URL.createObjectURL(selectedImage)}" class="img-fluid rounded-start" alt="..." id="articlepic" />` :
                postPic ? `<img src="${postPic}" class="img-fluid rounded-start" alt="..." id="articlepic" />` : '';

            var newPostElement = `
        <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
            <div class="row g-0">
                <div class="col-md-8">
                    <div class="card-body">
                        <h1 class="modal-title fs-5">
                            <img src="../image/cat.jpg" alt="大頭貼">
                            <div>
                                <a class="post_user">貓貓</a>
                                <div class="post_time">${postTime}</div>
                            </div>
                        </h1>
                        <button type="button" class="edit_discuss" data-bs-toggle="modal" data-bs-target="#exampleModal_edit" id="editButton" data-post-id="${postID}">
                        <i class="fa-regular fa-pen-to-square"></i>
                            <span class="tooltip-text">編輯</span>
                        </button>
                        <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                            <i class="fa-regular fa-trash-can"></i>
                            <span class="tooltip-text">刪除</span>
                        </button>
                        <h5 class="card-title">${postTitle}</h5>
                        <p class="card-text">${postContent}</p>
                    </div>
                </div>
                <div class="col-md-4" id="piccontainer">
                ${imageElement}
            </div>
                <div class="container text-center">
                    <div class="row align-items-start" id="card-footer">
                        <div class="col-2" id="likecol">
                            <button type="button" class="fa-regular fa-thumbs-up"> ${likeCnt}</button>
                        </div>
                        <div class="col-2" id="commentcol" data-post-id="${postID}">
                        <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                            data-bs-target="#exampleModal5" > 1
                        </div>
                    </div>
                </div>
            </div>
        </div>`;

            $('#post-list').prepend(newPostElement);
        }

	    function publishGroupPost(postID,postTitle, postContent, postType,postTime,postPic,likeCnt)  {
	    	  var selectedImage = $('#p_file').prop('files')[0];             
	            var imageElement = selectedImage ? `<img src="${URL.createObjectURL(selectedImage)}" class="img-fluid rounded-start" alt="..." id="articlepic" />` :
	                postPic ? `<img src="${postPic}" class="img-fluid rounded-start" alt="..." id="articlepic" />` : '';
            var date = $('#datecol2').text();
            var time = $('#timecol2').text();
            var location = $('#locatecol2').text();
            var sport = $('#ballcol2').text();
            var cost = $('#costcol2 input').val();
            // 創建新的揪團文章元素
            var newGroupPostElement = `
            	 <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                <div class="row g-0">
                    <div class="col-md-8">
                        <div class="card-body">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">
                                <img src="../image/dog.jpg" alt="大頭貼">
                                <div>
                                    <a class="post_user">小吉</a>
                                    <div class="post_time">${postTime}</div>
                                </div>
                            </h1>
                            <!-- <button type="button" class="edit_group" > <i class="fa-regular fa-pen-to-square"></i>編輯</button>
                            <button type="button" class="delete" > <i class="fa-regular fa-trash-can"></i>刪除</button> -->

                            <button type="button" class="report" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                                <i class="fa-solid fa-triangle-exclamation"></i>
                                <span class="tooltip-text">檢舉</span>
                            </button>
                            <h5 class="card-title">${postTitle}</h5>
                            <div class="container text-left">
                                <div class="row">
                                    <div class="col-2 col-sm-2">日期:</div>
                                    <div class="col-2 col-sm-4">${date}</div>
                                    <div class="w-100 d-none d-md-block"></div>

                                    <div class="col-2 col-sm-2">時間:</div>
                                    <div class="col-2 col-sm-4">${time}</div>
                                    <div class="w-100 d-none d-md-block"></div>

                                    <div class="col-2 col-sm-2">地點:</div>
                                    <div class="col-2 col-sm-4">${location}</div>
                                    <div class="w-100 d-none d-md-block"></div>

                                    <div class="col-2 col-sm-2">球類:</div>
                                    <div class="col-2 col-sm-4">${sport}</div>
                                    <div class="w-100 d-none d-md-block"></div>

                                    <div class="col-2 col-sm-2">費用:</div>
                                    <div class="col-2 col-sm-4">${cost}</div>
                                </div>
                            </div>
                            <p class="card-text2">${postContent}</p>
                        </div>
                    </div>
                    <div class="col-md-4" id="piccontainer">
                    ${imageElement}
                </div>
                    <div class="container text-center">
                        <div class="row align-items-start" id="card-footer">
                            <div class="col-2" id="likecol">
                                <button type="button" class="fa-regular fa-thumbs-up"> ${likeCnt}
                            </div>
                            <div class="col-2" id="commentcol" data-post-id="${postID}">
                                <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal5" > 1
                                </div>
                            <div class="col-2" id="pluscol">
                                <button type="button" class="fa-regular fa-square-plus"> +1
                            </div>
                        </div>
                    </div>
                </div>
            </div>`;

                $('#post-list').prepend(newGroupPostElement);
        }
	    function publishPromotePost(postID,postTitle, postType, postTime){
	    	var newPromotePostElement=`<div class="card mb-3" id=article3 style="width: 22rem;">
				<div class="row g-0">
				<div class="col-md-8">
					<div class="card-body">
						<h1 class="modal-title fs-5" id="exampleModalLabel">
							<img src="../image/Capybara.jpg" alt="大頭貼">
							<div>
								<a class="post_owner">水豚君</a>
								<div class="post_timer">${postTime}</div>
							</div>
						</h1>
						<h5 class="card-title">${postTitle}</h5>
						<p class="card-text">
						<div class="container text" s>
							<div class="row" style="width: 22rem">
								<div class="col-2 col-sm-3">日期:</div>
								<div class="col-2 col-sm-4">2023/11/20</div>
								<div class="w-100 d-none d-md-block"></div>

								<div class="col-2 col-sm-3">時間:</div>
								<div class="col-2 col-sm-4">08:00~09:00</div>
								<div class="w-100 d-none d-md-block"></div>

								<div class="col-2 col-sm-3">地點:</div>
								<div class="col-2 col-sm-4">陽明籃球館</div>
								<div class="w-100 d-none d-md-block"></div>

								<div class="col-2 col-sm-3">球類:</div>
								<div class="col-2 col-sm-4">籃球</div>
							</div>
						</div>
						</p>
					</div>
				</div>
			</div>`;
	    	  $('#promote-list').prepend(newPromotePostElement);
        
	    }
	    //========頁數顯示========
	    // 在document上使用事件委派
	    $(document).on('click', '.page-link', function() {
	        // 獲取 data-page 屬性的值
	        var page = $(this).data('page');
	        loadPage(page);
	    });

	    function loadPage(page) {
	        $.ajax({
	            url: "post.do",
	            type: "GET",
	            data: { "page": page },
	            dataType: "json",
	            success: function(data) {
	            	$('#post-list').empty();
	            	var currentPage = data.currentPage; 
	            	var postPageQty = data.postPageQty;
	                data.sort(function(a, b) {
	                    // 按 postID 降序排序
	                    return b.postID - a.postID;
	                });
	                listAll(data);
	                updatePagination(page, data.postPageQty);
	            },
	            error: function(xhr, status, error) {
	                console.error("AJAX request failed:", status, error);
	            }
	        });
	    }
	    
	    function listAll(data) {
	        data.forEach(function (post) {
	            if (post.postType === 0) {
	                publishPost(post.postID, post.postTitle, post.postContent, post.postType, post.postTime, post.likeCnt);
	            } else if (post.postType === 1) {
	                publishGroupPost(post.postID, post.postTitle, post.postContent, post.postType, post.postTime, post.likeCnt);
	            } else if (post.postType === 2) {
	                publishPromotePost(post.postID, post.postTitle, post.postType, post.postTime);
	            }
	        });
	    }

	    function updatePagination(currentPage, postPageQty) {
	        var pageElement = $("#page");
	        
	        pageElement.empty();

	        // Previous Page Button
	        pageElement.append('<li class="page-item"><a class="page-link" href="#" data-page="' + (currentPage - 1) + '"> <span aria-hidden="true">&laquo;</span></a></li>');

	        // Page Buttons
	        for (let i = 1; i <= postPageQty; i++) {
	            pageElement.append('<li class="page-item"><a class="page-link" href="#" data-page="' + i + '">' + i + '</a></li>');
	        }

	        // Next Page Button
	        pageElement.append('<li class="page-item"><a class="page-link" href="#" data-page="' + (currentPage + 1) + '" aria-label="Next"> <span aria-hidden="true">&raquo;</span></a></li>');

	        // Unbind Previous Click Event
	        pageElement.find("a.page-link").off('click');

	        // Rebind Click Event
	        pageElement.find("a.page-link").on('click', function() {
	            var page = $(this).data('page');
	            loadPage(page);
	        });
	    }

//=============新增文章(討論)===============//
	   $("#pb-discuss").on("click", function () {
	        var newPostTitle = $("#floatingTextarea").val();
	        var newPostContent = $("#floatingTextarea2").val();
	        var discussType=$(".discussType").val();
	        var selectedFiles = $("#p_file")[0].files;

	     let formData = new FormData();
	     formData.append("action", "insert");
	     formData.append("postTitle", newPostTitle);
	     formData.append("postContent", newPostContent);
	     formData.append("discussType", discussType);
	     formData.append("postPic", selectedFiles[0]);

	        $.ajax({
	            type: "POST",
	            url: "post.do", 
	            data: formData,
	            dataType:"json",
	            processData: false, 
	            contentType: false, 
	            success: function (response) {
	            	console.log("伺服器回應:", response);
// 	            	var newPostID = response.postID;
  fetchAndDisplayLatestData(response.postID,newPostTitle, newPostContent, response.postTime,selectedFiles);
	            
	                console.log("發布成功:", response);
	            },
	            error: function (xhr, status, error) {
	                console.error("發生錯誤:", status, error);
	            }
	        });
	    });

	   function   fetchAndDisplayLatestData(postID,newPostTitle, newPostContent,postTime, selectedFiles) {
		    // 發送請求以獲取最新資料
		    $.ajax({
		        type: "GET",
		        url: "post.do",  // 替換成實際的後端處理檔案或API端點
		        success: function (data) {
// 		        	  var displayName = data.isAnonymous ? "匿名用戶" : "貓貓";
// 		              var avatarPath = data.isAnonymous ? getAnonymousAvatarPath() : getMemberAvatarPath(data.memberID);
		        	var newPost=
		            	`<div class="card mb-3 article"  id="article${postID}" style="max-width: 700px;">
		              <div class="row g-0">
		                  <div class="col-md-8">
		                      <div class="card-body">
		                          <h1 class="modal-title fs-5">
		                              <img src="../image/cat.jpg" alt="大頭貼">
		                              <div>
		                                  <a class="post_user">貓貓</a>
		                                  <div class="post_time">${postTime}</div>
		                              </div>
		                          </h1>
// 		                          <h1 class="modal-title fs-5">
// 	                              <img src="${avatarPath}" alt="大頭貼">
// 	                              <div>
// 	                                  <a class="post_user">${displayName}</a>
// 	                                  <div class="post_time">${postTime}</div>
// 	                              </div>
// 	                          </h1>
		                          <button type="button" class="edit_discuss" data-post-id="${postID}">
		                              <i class="fa-regular fa-pen-to-square"></i>
		                              <span class="tooltip-text">編輯</span>
		                          </button>
		                          <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
		                              <i class="fa-regular fa-trash-can"></i>
		                              <span class="tooltip-text">刪除</span>
		                          </button>
		                          <h5 class="card-title">${newPostTitle}</h5>
		                          <p class="card-text">${newPostContent}</p>
		                      </div>
		                  </div>
		                  <div class="col-md-4" id="piccontainer">
		                  ${selectedFiles && selectedFiles.length > 0 ? `<img src="${URL.createObjectURL(selectedFiles[0])}" alt="Selected Image" >` : ''}
		              </div>
		                  <div class="container text-center">
		                      <div class="row align-items-start" id="card-footer">
		                          <div class="col-2" id="likecol">
		                              <button type="button" class="fa-regular fa-thumbs-up"> 0</button>
		                          </div>
		                          <div class="col-2" id="commentcol" data-post-id="${postID}">
	                                <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
	                                    data-bs-target="#exampleModal5" > 1
	                                </div>
		                      </div>
		                  </div>
		              </div>
		          </div>`;

		              // 將新文章添加到文章列表
		              $('#post-list').prepend(newPost);
		              $('#floatingTextarea').val('');
		              $('#floatingTextarea2').val('');
		              $('#p_file').val('');
	                  document.getElementById('preview').innerHTML = '';
		        },
		        error: function (error) {
		            console.error(error);
		            alert("發生錯誤，無法獲取最新資料。");
		        }
		    });
		}
		// 初始化時獲取一次最新資料
		$(document).ready(function () {
		    fetchAndDisplayLatestData();
		});
	 //=============新增文章(揪團))===============//
	   $("#pb-group").on("click", function () {
	        var newPostTitle = $("#floatingTextarea3").val();
	        var newPostContent = $("#floatingTextarea4").val();
	        var groupType=$(".groupType").val();
	        var selectedFiles = $("#p_file")[0].files;

  let formData = new FormData();
	     formData.append("action", "insert_group");
	     formData.append("postTitle", newPostTitle);
	     formData.append("postContent", newPostContent);
	     formData.append("groupType", groupType);
	     formData.append("postPic", selectedFiles[0]);

	     $.ajax({
	            type: "POST",
	            url: "post.do", 
	            data: formData,
	            dataType:"json",
	            processData: false, 
	            contentType: false, 
	            success: function (response) {
	            	console.log("伺服器回應:", response);
// 	            	var newPostID = response.postID;
  fetchAndDisplayLatestData2(response.postID,newPostTitle, newPostContent, response.postTime,selectedFiles);
	            
	                console.log("發布成功:", response);
	            },
	            error: function (xhr, status, error) {
	                console.error("發生錯誤:", status, error);
	            }
	        });
	    });

	   function   fetchAndDisplayLatestData2(postID,newPostTitle, newPostContent,postTime, selectedFiles) {
		    // 發送請求以獲取最新資料
		    $.ajax({
		        type: "GET",
		        url: "post.do",  // 替換成實際的後端處理檔案或API端點
		        success: function (data) {
		        	var newPost=`
	            	    <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
	              <div class="row g-0">
	                  <div class="col-md-8">
	                      <div class="card-body">
	                          <h1 class="modal-title fs-5" id="exampleModalLabel">
	                              <img src="../image/dog.jpg" alt="大頭貼">
	                              <div>
	                                  <a class="post_user">小吉</a>
	                                  <div class="post_time">${postTime}</div>
	                              </div>
	                          </h1>
	                          <button type="button" class="edit_group">
                              <i class="fa-regular fa-pen-to-square"></i>
                              <span class="tooltip-text">編輯</span>
                          </button>
                          <button type="button" class="delete" id="deleteButton">
                              <i class="fa-regular fa-trash-can"></i>
                              <span class="tooltip-text">刪除</span>
                          </button>

	                          <h5 class="card-title">${newPostTitle}</h5>
	                          <div class="container text-left">
	                              <div class="row">
	                                  <div class="col-2 col-sm-2">日期:</div>
	                                  <div class="col-2 col-sm-4">12/12</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">時間:</div>
	                                  <div class="col-2 col-sm-4">0800~0900</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">地點:</div>
	                                  <div class="col-2 col-sm-4">我家</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">球類:</div>
	                                  <div class="col-2 col-sm-4">保齡球</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">費用:</div>
	                                  <div class="col-2 col-sm-4">81000</div>
	                              </div>
	                          </div>
	                          <p class="card-text2">${newPostContent}</p>
	                      </div>
	                  </div>
	                  <div class="col-md-4" id="piccontainer">
	                  ${selectedFiles && selectedFiles.length > 0 ? `<img src="${URL.createObjectURL(selectedFiles[0])}" alt="Selected Image" >` : ''}
	              </div>
	                  <div class="container text-center">
	                      <div class="row align-items-start" id="card-footer">
	                          <div class="col-2" id="likecol">
	                              <button type="button" class="fa-regular fa-thumbs-up"> 87
	                          </div>
	                          <div class="col-2" id="commentcol" data-post-id="${postID}">
	                              <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
	                                  data-bs-target="#exampleModal5" > 1
	                              </div>
	                          <div class="col-2" id="pluscol">
	                              <button type="button" class="fa-regular fa-square-plus"> +1
	                          </div>
	                      </div>
	                  </div>
	              </div>
	          </div>`;
	              $('#post-list').prepend(newPost);

	              $('#floatingTextarea3').val('');
	              $('#floatingTextarea4').val('');
	              $('#p_file2').val('');
                  document.getElementById('preview2').innerHTML = '';
	                $('#exampleModal').modal('hide');
	            },
	            error: function (xhr, status, error) {
	                console.error("發生錯誤:", status, error);
	            }
	        });		            
		}
		// 初始化時獲取一次最新資料
		$(document).ready(function () {
		    fetchAndDisplayLatestData();
		});
	  
// =============編輯文章===============//
// ===找到原先的值(討論)===//
$("#post-list").on("click", ".edit_discuss", function (){
console.log("click");
    var postID = $(this).data("post-id");
    var saveButton = $(".save-button_discuss");
    
    $.ajax({
    	action:"getOne_For_Update",
        type: "GET",
        url: "post.do",  
        data: { "postID": postID },
        dataType: "json",
        success: function (postData) {
        	console.log("aa")
            $("#floatingTextarea_edit").val(postData.postTitle);
            $("#floatingTextarea2_edit").val(postData.postContent);
            var postPic = postData.postPic;
            $("#preview_edit").html(`<img src="${postPic}" alt="預覽圖">`);
            
            saveButton.attr("data-post-id", postData.postID);
        },
        error: function (xhr, status, error) {
            console.error("Get Post Details Error:", status, error);
        }
    });
});
//===找到原先的值(揪團)===//
$("#post-list").on("click", ".edit_group", function (){
console.log("click");
    var postID = $(this).data("post-id");
    var saveButton = $(".save-button_group");
    $.ajax({
    	action:"getOne_For_Update",
        type: "GET",
        url: "post.do",  
        data: { "postID": postID },
        dataType: "json",
        success: function (postData) {
        	console.log("aa")
            $("#floatingTextarea3_edit").val(postData.postTitle);
            $("#floatingTextarea4_edit").val(postData.postContent);
            var postPic = postData.postPic;
            $("#preview2_edit").html(`<img src="${postPic}" alt="預覽圖">`);
            
            saveButton.attr("data-post-id", postData.postID);
        },
        error: function (xhr, status, error) {
            console.error("Get Post Details Error:", status, error);
        }
    });
});
//===編輯動作(討論)===//
$(".save-button_discuss").on("click",function(){
// 	console.log("bbb");
   var postID = $(this).attr("data-post-id");
   var newPostTitle = $("#floatingTextarea_edit").val();
   var newPostContent = $("#floatingTextarea2_edit").val();
   
   var formData = new FormData();
   formData.append("action", "update");
   formData.append("postID", postID);
   formData.append("postTitle", newPostTitle);
   formData.append("postContent", newPostContent);
$.ajax({
	type: "POST",
    url: "post.do",
    data: formData,
    dataType:"json",
    processData: false,  // 不處理數據
    contentType: false,  // 不設置內容類型
    success: function (response) {
        console.log("Update Success:", response);
        $("#article" + postID + " .card-title").text(newPostTitle);
        $("#article" + postID + " .card-text").text(newPostContent);
        $("#exampleModal_edit").modal("hide");
    },
    error: function (xhr, status, error) {
        console.error("Update Error:", status, error);

    }
});
})
//===編輯動作(揪團)===//
$(".save-button_group").on("click",function(){
// 	console.log("bbb");
   var postID = $(this).attr("data-post-id");
   var newPostTitle = $("#floatingTextarea3_edit").val();
   var newPostContent = $("#floatingTextarea4_edit").val();
   
   var formData = new FormData();
   formData.append("action", "update");
   formData.append("postID", postID);
   formData.append("postTitle", newPostTitle);
   formData.append("postContent", newPostContent);
$.ajax({
	type: "POST",
    url: "post.do",
    data: formData,
    dataType:"json",
    processData: false,  // 不處理數據
    contentType: false,  // 不設置內容類型
    success: function (response) {
        console.log("Update Success:", response);
        $("#article" + postID + " .card-title").text(newPostTitle);
        $("#article" + postID + " .card-text").text(newPostContent);
        $("#exampleModal_edit").modal("hide");
    },
    error: function (xhr, status, error) {
        console.error("Update Error:", status, error);

    }
});
})
//=============刪除文章===============//
	   $("#post-list").on("click", ".delete", function (){
// 	        console.log("aaa");
	        var postID = $(this).attr("data-post-id");
	        var confirmDelete = confirm("是否確定刪除文章?");
	        if (!confirmDelete) {
	            return;
	        }
	        $.ajax({
	            type: "POST",
	            url: "post.do",
	            data: {
	            	"action":"delete",
	            	"postID": postID 
	            	},
	            	 dataType: "json",
	            success: function (data) {
	            	$("#post-list [data-post-id='" + postID + "']").closest('.card').fadeOut(1000, function () {
	                    $(this).remove();
	                });
	                console.log("Delete Success:", data);
	            },
	            error: function (xhr, status, error) {
	                console.error("Delete Error:", status, error);
	            }
	        });
	    });
//=======顯示完整文章==========
$("#post-list").on("click", "#commentcol", function (){
 var postID = $(this).attr("data-post-id");
	    $.ajax({
	        type: "GET",
	        url: "post.do",  
	        data: {
	        	"action" : "get_By_postID",
	        	"postID": postID },
	        dataType: "json",
	        success: function (postData) {
	        	console.log("aa")
	        $(".card-title.article0").text(postData.postTitle);
            $(".card-text.article1").text(postData.postContent);
            console.log(postData.postTitle);
            console.log(postData.postContent);
// 	            var postPic = postData.postPic;
// 	            $("#preview_edit").html(`<img src="${postPic}" alt="預覽圖">`);

	        },
	        error: function (xhr, status, error) {
	            console.error("Get Post Details Error:", status, error);
	        }
	    });
});
	    //====我的文章=====
$("#search-options").change(function () {
    var selectedOption = $(this).val();

    if (selectedOption === "my-posts") {
        $.ajax({
            type: "POST",
            url: "post.do",  // 替換成實際的後端處理檔案或API端點
            data: {
                "action": "get_By_gUserID",
                "gUserID": 11000001  // 根據實際情況傳遞相應的用戶ID
            },
            success: function (data) {
            	  $("#post-list").empty();
                  // 將伺服器返回的結果顯示在搜索結果區域
                  console.log(data);
                  var posts = data;
                 
                  for (var i = 0; i < posts.length; i++) {

               	   var imageElement = posts[i].imageElement ? posts[i].imageElement : '';
               	   var postType = posts[i].postType;
               	   var postID = posts[i].postID;
               	  var likeCnt = posts[i].likeCnt;
             	   var commentCnt = posts[i].commentCnt;
               	   if (postType === 0) {
                      $("#post-list").append(`
                   		   <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                              <div class="row g-0">
                                  <div class="col-md-8">
                                      <div class="card-body">
                                          <h1 class="modal-title fs-5">
                                              <img src="../image/cat.jpg" alt="大頭貼">
                                              <div>
                                                  <a class="post_user">貓貓</a>
                                                  <div class="post_time">${posts[i].postTime}</div>
                                              </div>
                                          </h1>
                                          <button type="button" class="edit_discuss" data-bs-toggle="modal" data-bs-target="#exampleModal_edit" data-post-id="${postID}">
                                          <i class="fa-regular fa-pen-to-square"></i>
                                              <span class="tooltip-text">編輯</span>
                                          </button>
                                          <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                              <i class="fa-regular fa-trash-can"></i>
                                              <span class="tooltip-text">刪除</span>
                                          </button>
                                          <h5 class="card-title">${posts[i].postTitle}</h5>
                                          <p class="card-text">${posts[i].postContent}</p>
                                      </div>
                                  </div>
                                  <div class="col-md-4" id="piccontainer">
                                  ${imageElement}
                              </div>
                                  <div class="container text-center">
                                      <div class="row align-items-start" id="card-footer">
                                          <div class="col-2" id="likecol">
                                              <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}</button>
                                          </div>
                                          <div class="col-2" id="commentcol" data-post-id="${postID}">
                                          <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                                              data-bs-target="#exampleModal5"> 1
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          </div>
                      `);
                  }else if(postType===1){
               	   $("#post-list").append(`
   	            	    <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
   	              <div class="row g-0">
   	                  <div class="col-md-8">
   	                      <div class="card-body">
   	                          <h1 class="modal-title fs-5" id="exampleModalLabel">
   	                              <img src="../image/dog.jpg" alt="大頭貼">
   	                              <div>
   	                                  <a class="post_user">小吉</a>
   	                                  <div class="post_time">${posts[i].postTime}</div>
   	                              </div>
   	                          </h1>
   	                          <button type="button" class="edit_group" data-post-id="${postID}">
                                 <i class="fa-regular fa-pen-to-square"></i>
                                 <span class="tooltip-text">編輯</span>
                             </button>
                             <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                 <i class="fa-regular fa-trash-can"></i>
                                 <span class="tooltip-text">刪除</span>
                             </button>

   	                          <h5 class="card-title">${posts[i].postTitle}</h5>
   	                          <div class="container text-left">
   	                              <div class="row">
   	                                  <div class="col-2 col-sm-2">日期:</div>
   	                                  <div class="col-2 col-sm-4">12/12</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">時間:</div>
   	                                  <div class="col-2 col-sm-4">0800~0900</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">地點:</div>
   	                                  <div class="col-2 col-sm-4">我家</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">球類:</div>
   	                                  <div class="col-2 col-sm-4">保齡球</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">費用:</div>
   	                                  <div class="col-2 col-sm-4">81000</div>
   	                              </div>
   	                          </div>
   	                          <p class="card-text2">${posts[i].postContent}</p>
   	                      </div>
   	                  </div>
   	                  <div class="col-md-4" id="piccontainer">
   	                  ${imageElement}
   	              </div>
   	                  <div class="container text-center">
   	                      <div class="row align-items-start" id="card-footer">
   	                          <div class="col-2" id="likecol">
   	                              <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}
   	                          </div>
   	                          <div class="col-2" id="commentcol" data-post-id="${postID}">
   	                              <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
   	                                  data-bs-target="#exampleModal5" > ${posts[i].commentCnt}
   	                              </div>
   	                          <div class="col-2" id="pluscol">
   	                              <button type="button" class="fa-regular fa-square-plus"> +1
   	                          </div>
   	                      </div>
   	                  </div>
   	              </div>
   	          </div>`
                   );
           	   }
              }
          }
      });
    }
  });

	    //=======文章類型搜尋==========
	    	var savedPostType;
	    	var posts;
$("#search-options").change(function () {
    var selectedOption = $(this).val();
    $(".saved-post-type").val(selectedOption === "discussions" ? 0 : 1);
    savedPostType = $(".saved-post-type").val();
    console.log('Selected Option (Change Event):', selectedOption);
    if (selectedOption === "discussions" || selectedOption === "events") {
        $.ajax({
            type: "POST",
            url: "post.do",  
            data: {
                "action": "get_By_Type",
                "postType": (selectedOption === "discussions") ? 0 : 1
            },
            success: function (data) {
            	 $(".saved-post-type").val(selectedOption === "discussions" ? 0 : 1);
                $("#post-list").empty();
                console.log(data);
               posts = data;
         	   
                for (var i = 0; i < posts.length; i++) {
                	   var imageElement = posts[i].imageElement ? posts[i].imageElement : '';
                 	   var postType = posts[i].postType;
                 	   var postID = posts[i].postID;
                 	  var likeCnt = posts[i].likeCnt ? posts[i].likeCnt : '';
                  	   var commentCnt = posts[i].commentCnt ? posts[i].commentCnt: '';
                    if (selectedOption === "discussions") {
                        // 生成討論版文章的HTML
                        $("#post-list").append(`
                     		   <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                     		  <input type="hidden" class="saved-post-type" value="" />
                                <div class="row g-0">
                                    <div class="col-md-8">
                                        <div class="card-body">
                                            <h1 class="modal-title fs-5">
                                                <img src="../image/cat.jpg" alt="大頭貼">
                                                <div>
                                                    <a class="post_user">貓貓</a>
                                                    <div class="post_time">${posts[i].postTime}</div>
                                                </div>
                                            </h1>
                                            <button type="button" class="edit_discuss" data-bs-toggle="modal" data-bs-target="#exampleModal_edit" data-post-id="${postID}">
                                            <i class="fa-regular fa-pen-to-square"></i>
                                                <span class="tooltip-text">編輯</span>
                                            </button>
                                            <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                                <i class="fa-regular fa-trash-can"></i>
                                                <span class="tooltip-text">刪除</span>
                                            </button>
                                            <h5 class="card-title">${posts[i].postTitle}</h5>
                                            <p class="card-text">${posts[i].postContent}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-4" id="piccontainer">
                                    ${imageElement}
                                </div>
                                    <div class="container text-center">
                                        <div class="row align-items-start" id="card-footer">
                                            <div class="col-2" id="likecol">
                                                <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}</button>
                                            </div>
                                            <div class="col-2" id="commentcol" data-post-id="${postID}">
                                            <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                                                data-bs-target="#exampleModal5" > 1
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>
                        `);
                    } else if (selectedOption === "events") {
                        // 生成揪團版文章的HTML
                        $("#post-list").append(`
                        	    <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                        	    <input type="hidden" class="saved-post-type" value="" />
              	              <div class="row g-0">
              	                  <div class="col-md-8">
              	                      <div class="card-body">
              	                          <h1 class="modal-title fs-5" id="exampleModalLabel">
              	                              <img src="../image/dog.jpg" alt="大頭貼">
              	                              <div>
              	                                  <a class="post_user">小吉</a>
              	                                  <div class="post_time">${posts[i].postTime}</div>
              	                              </div>
              	                          </h1>
              	                          <button type="button" class="edit_group" data-post-id="${postID}">
                                            <i class="fa-regular fa-pen-to-square"></i>
                                            <span class="tooltip-text">編輯</span>
                                        </button>
                                        <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                            <i class="fa-regular fa-trash-can"></i>
                                            <span class="tooltip-text">刪除</span>
                                        </button>

              	                          <h5 class="card-title">${posts[i].postTitle}</h5>
              	                          <div class="container text-left">
              	                              <div class="row">
              	                                  <div class="col-2 col-sm-2">日期:</div>
              	                                  <div class="col-2 col-sm-4">12/12</div>
              	                                  <div class="w-100 d-none d-md-block"></div>

              	                                  <div class="col-2 col-sm-2">時間:</div>
              	                                  <div class="col-2 col-sm-4">0800~0900</div>
              	                                  <div class="w-100 d-none d-md-block"></div>

              	                                  <div class="col-2 col-sm-2">地點:</div>
              	                                  <div class="col-2 col-sm-4">我家</div>
              	                                  <div class="w-100 d-none d-md-block"></div>

              	                                  <div class="col-2 col-sm-2">球類:</div>
              	                                  <div class="col-2 col-sm-4">保齡球</div>
              	                                  <div class="w-100 d-none d-md-block"></div>

              	                                  <div class="col-2 col-sm-2">費用:</div>
              	                                  <div class="col-2 col-sm-4">81000</div>
              	                              </div>
              	                          </div>
              	                          <p class="card-text2">${posts[i].postContent}</p>
              	                      </div>
              	                  </div>
              	                  <div class="col-md-4" id="piccontainer">
              	                  ${imageElement}
              	              </div>
              	                  <div class="container text-center">
              	                      <div class="row align-items-start" id="card-footer">
              	                          <div class="col-2" id="likecol">
              	                              <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}
              	                          </div>
              	                          <div class="col-2" id="commentcol" data-post-id="${postID}">
              	                              <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
              	                                  data-bs-target="#exampleModal5" > ${posts[i].commentCnt}
              	                              </div>
              	                          <div class="col-2" id="pluscol">
              	                              <button type="button" class="fa-regular fa-square-plus"> +1
              	                          </div>
              	                      </div>
              	                  </div>
              	              </div>
              	          </div>
                        `);
                    }
                }
            }
        });
    }
});
//======熱門=======
	
$("#search-options").change(function () {
    var selectedOption = $(this).val();

    if (selectedOption === "hot") {

        $.ajax({
            type: "POST",
            url: "post.do",  
            data: {
                "action": "get_By_Comment",
            },
            success: function (data) {
            	  $("#post-list").empty();

                  console.log(data);
                  var posts = data;
                 
                  for (var i = 0; i < posts.length; i++) {

               	   var imageElement = posts[i].imageElement ? posts[i].imageElement : '';
               	   var postType = posts[i].postType;
               	   var postID = posts[i].postID;
               	   var likeCnt = posts[i].likeCnt;
               	   var commentCnt = posts[i].commentCnt;
               	   if (postType === 0) {
                      $("#post-list").append(`
                   		   <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                              <div class="row g-0">
                                  <div class="col-md-8">
                                      <div class="card-body">
                                          <h1 class="modal-title fs-5">
                                              <img src="../image/cat.jpg" alt="大頭貼">
                                              <div>
                                                  <a class="post_user">貓貓</a>
                                                  <div class="post_time">${posts[i].postTime}</div>
                                              </div>
                                          </h1>
                                          <button type="button" class="edit_discuss" data-bs-toggle="modal" data-bs-target="#exampleModal_edit" data-post-id="${postID}">
                                          <i class="fa-regular fa-pen-to-square"></i>
                                              <span class="tooltip-text">編輯</span>
                                          </button>
                                          <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                              <i class="fa-regular fa-trash-can"></i>
                                              <span class="tooltip-text">刪除</span>
                                          </button>
                                          <h5 class="card-title">${posts[i].postTitle}</h5>
                                          <p class="card-text">${posts[i].postContent}</p>
                                      </div>
                                  </div>
                                  <div class="col-md-4" id="piccontainer">
                                  ${imageElement}
                              </div>
                                  <div class="container text-center">
                                      <div class="row align-items-start" id="card-footer">
                                          <div class="col-2" id="likecol">
                                              <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}</button>
                                          </div>
                                          <div class="col-2" id="commentcol" data-post-id="${postID}">
                                          <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                                              data-bs-target="#exampleModal5" > 1
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          </div>
                      `);
                  }else if(postType===1){
               	   $("#post-list").append(`
   	            	    <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
   	              <div class="row g-0">
   	                  <div class="col-md-8">
   	                      <div class="card-body">
   	                          <h1 class="modal-title fs-5" id="exampleModalLabel">
   	                              <img src="../image/dog.jpg" alt="大頭貼">
   	                              <div>
   	                                  <a class="post_user">小吉</a>
   	                                  <div class="post_time">${posts[i].postTime}</div>
   	                              </div>
   	                          </h1>
   	                          <button type="button" class="edit_group" data-post-id="${postID}">
                                 <i class="fa-regular fa-pen-to-square"></i>
                                 <span class="tooltip-text">編輯</span>
                             </button>
                             <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                 <i class="fa-regular fa-trash-can"></i>
                                 <span class="tooltip-text">刪除</span>
                             </button>

   	                          <h5 class="card-title">${posts[i].postTitle}</h5>
   	                          <div class="container text-left">
   	                              <div class="row">
   	                                  <div class="col-2 col-sm-2">日期:</div>
   	                                  <div class="col-2 col-sm-4">12/12</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">時間:</div>
   	                                  <div class="col-2 col-sm-4">0800~0900</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">地點:</div>
   	                                  <div class="col-2 col-sm-4">我家</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">球類:</div>
   	                                  <div class="col-2 col-sm-4">保齡球</div>
   	                                  <div class="w-100 d-none d-md-block"></div>

   	                                  <div class="col-2 col-sm-2">費用:</div>
   	                                  <div class="col-2 col-sm-4">81000</div>
   	                              </div>
   	                          </div>
   	                          <p class="card-text2">${posts[i].postContent}</p>
   	                      </div>
   	                  </div>
   	                  <div class="col-md-4" id="piccontainer">
   	                  ${imageElement}
   	              </div>
   	                  <div class="container text-center">
   	                      <div class="row align-items-start" id="card-footer">
   	                          <div class="col-2" id="likecol">
   	                              <button type="button" class="fa-regular fa-thumbs-up"> ${posts[i].likeCnt}
   	                          </div>
   	                          <div class="col-2" id="commentcol" data-post-id="${postID}">
   	                              <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
   	                                  data-bs-target="#exampleModal5" > ${posts[i].commentCnt}
   	                              </div>
   	                          <div class="col-2" id="pluscol">
   	                              <button type="button" class="fa-regular fa-square-plus"> +1
   	                          </div>
   	                      </div>
   	                  </div>
   	              </div>
   	          </div>`
                   );
           	   }
              }
          }
      });
    }
  });
	    
	    //=========標題搜尋==============//
	   $("#search-button").click(function () {
		    performSearch();
	   });
	    
	   $("#search-input").keydown(function (event) {
		    // 检查按下的键是否是 Enter 键 (key code 13)
		    if (event.which === 13) {
		        performSearch();
		    }
		});
           function performSearch() {
           var postTitle = $("#search-input").val();
           var selectedOption = $("#search-options").val();
           $(".saved-post-type").val(selectedOption === "discussions" ? 0 : 1);
           savedPostType = $(".saved-post-type").val();
           console.log('Post Title:', postTitle);
           console.log('Selected Option:', selectedOption);
           console.log('Saved Post Type:', $(".saved-post-type").val());
           if (!postTitle.trim()) {
               alert("請輸入欲搜尋的標題");
               return; // 中止搜索操作
           }
           if (selectedOption === "discussions" || selectedOption === "events") {
               // 使用前端資料進行標題搜尋
               var filteredPosts = posts.filter(function (post) {
                   return post.postTitle.includes(postTitle) && post.postType === (selectedOption === "discussions" ? 0 : 1);
               });

               // 顯示前端搜尋結果
               displayPosts(filteredPosts);
           } else {
               // 使用後端資料進行標題搜尋
               $.ajax({
                   type: "POST",
                   url: "post.do",
                   data: {
                       "action": "get_By_Title",
                       "postTitle": postTitle,
                       "postType": savedPostType || (selectedOption === "discussions" ? 0 : 1)
                   },
                   success: function (data) {
                       $(".saved-post-type").val(selectedOption);
                       $("#post-list").empty();
                       console.log(data);
                       var filteredPosts = data;
                       displayPosts(filteredPosts);
                       var newUrl = "http://localhost:8081/PiChill/post/listAll.html.html?q=" + encodeURIComponent(postTitle);
                       history.pushState({ search: postTitle }, null, newUrl);
                   }
               });
           }
           }
       function displayPosts(postsToDisplay) {
           $("#post-list").empty();
           for (var i = 0; i < postsToDisplay.length; i++) {
        	   var post = postsToDisplay[i];
        	   var imageElement = post.imageElement ? post.imageElement : '';
        	   var postType = post.postType;
        	   var postTime = post.postTime;
            	   var postID = post.postID;
            	   var likeCnt = post.likeCnt;
               	   var commentCnt = post.commentCnt;
            	   if (postType === 0) {
                   $("#post-list").append(`
                		   <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
                		   <input type="hidden" class="saved-post-type" value="" />
                           <div class="row g-0">
                               <div class="col-md-8">
                                   <div class="card-body">
                                       <h1 class="modal-title fs-5">
                                           <img src="../image/cat.jpg" alt="大頭貼">
                                           <div>
                                               <a class="post_user">貓貓</a>
                                               <div class="post_time">${postTime}</div>
                                           </div>
                                       </h1>
                                       <button type="button" class="edit_discuss" data-bs-toggle="modal" data-bs-target="#exampleModal_edit" data-post-id="${postID}">
                                       <i class="fa-regular fa-pen-to-square"></i>
                                           <span class="tooltip-text">編輯</span>
                                       </button>
                                       <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                                           <i class="fa-regular fa-trash-can"></i>
                                           <span class="tooltip-text">刪除</span>
                                       </button>
                                       <h5 class="card-title">${post.postTitle}</h5>
                                       <p class="card-text">${post.postContent}</p>
                                   </div>
                               </div>
                               <div class="col-md-4" id="piccontainer">
                               ${imageElement}
                           </div>
                               <div class="container text-center">
                                   <div class="row align-items-start" id="card-footer">
                                       <div class="col-2" id="likecol">
                                           <button type="button" class="fa-regular fa-thumbs-up">${likeCnt}</button>
                                       </div>
                                       <div class="col-2" id="commentcol" data-post-id="${postID}">
                                       <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
                                           data-bs-target="#exampleModal5" > 1
                                       </div>
                                   </div>
                               </div>
                           </div>
                       </div>
                       </div>
                   `);
               }else if(postType===1){
            	   $("#post-list").append(`
	            	    <div class="card mb-3 article" id="article${postID}" style="max-width: 700px;">
	            	    <input type="hidden" class="saved-post-type" value="" />
	              <div class="row g-0">
	                  <div class="col-md-8">
	                      <div class="card-body">
	                          <h1 class="modal-title fs-5" id="exampleModalLabel">
	                              <img src="../image/dog.jpg" alt="大頭貼">
	                              <div>
	                                  <a class="post_user">小吉</a>
	                                  <div class="post_time">${postTime}</div>
	                              </div>
	                          </h1>
	                          <button type="button" class="edit_group" data-post-id="${postID}">
                              <i class="fa-regular fa-pen-to-square"></i>
                              <span class="tooltip-text">編輯</span>
                          </button>
                          <button type="button" class="delete" id="deleteButton" data-post-id="${postID}">
                              <i class="fa-regular fa-trash-can"></i>
                              <span class="tooltip-text">刪除</span>
                          </button>

	                          <h5 class="card-title">${post.postTitle}</h5>
	                          <div class="container text-left">
	                              <div class="row">
	                                  <div class="col-2 col-sm-2">日期:</div>
	                                  <div class="col-2 col-sm-4">12/12</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">時間:</div>
	                                  <div class="col-2 col-sm-4">0800~0900</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">地點:</div>
	                                  <div class="col-2 col-sm-4">我家</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">球類:</div>
	                                  <div class="col-2 col-sm-4">保齡球</div>
	                                  <div class="w-100 d-none d-md-block"></div>

	                                  <div class="col-2 col-sm-2">費用:</div>
	                                  <div class="col-2 col-sm-4">81000</div>
	                              </div>
	                          </div>
	                          <p class="card-text2">${post.postContent}</p>
	                      </div>
	                  </div>
	                  <div class="col-md-4" id="piccontainer">
	                  ${imageElement}
	              </div>
	                  <div class="container text-center">
	                      <div class="row align-items-start" id="card-footer">
	                          <div class="col-2" id="likecol">
	                              <button type="button" class="fa-regular fa-thumbs-up"> ${likeCnt}
	                          </div>
	                          <div class="col-2" id="commentcol" data-post-id="${postID}">
	                              <button type="button" class="fa-regular fa-comment" data-bs-toggle="modal"
	                                  data-bs-target="#exampleModal5" > ${commentCnt}
	                              </div>
	                          <div class="col-2" id="pluscol">
	                              <button type="button" class="fa-regular fa-square-plus"> +1
	                          </div>
	                      </div>
	                  </div>
	              </div>
	          </div>`
               );
            	   }
               }  
       }
   });
    </script>

</body>

</html>